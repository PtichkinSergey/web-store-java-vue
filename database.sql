DROP TABLE IF EXISTS comments;
DROP TABLE IF EXISTS good_order;
DROP TABLE IF EXISTS good_category;
DROP TABLE IF EXISTS goods;
DROP TABLE IF EXISTS categories;
DROP TABLE IF EXISTS orders;
DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS status;

CREATE TABLE users (
	user_id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	first_name varchar(255),
	second_name varchar(255),
	email varchar(255),
	is_admin boolean
);

CREATE TABLE goods (
	good_id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	name VARCHAR(50),
	cost int NOT NULL,
	count int NOT NULL,
	manufacturer VARCHAR(50),
	description VARCHAR(255)
);

CREATE TABLE categories (
	category_id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	name VARCHAR(50),
	parent_id INT
);

CREATE TABLE comments (
	comment_id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	user_id INT,
	good_id INT,
	text VARCHAR(255),
	rating int NOT NULL,
	image_path VARCHAR(255),
	FOREIGN KEY(user_id) REFERENCES users(user_id),
	FOREIGN KEY(good_id) REFERENCES goods(good_id)
);

CREATE TABLE status (
	status_id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	name VARCHAR(255)
);

CREATE TABLE orders (
	order_id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	user_id INT,
	status_id INT,
	FOREIGN KEY(status_id) REFERENCES status(status_id)
);

CREATE TABLE good_category (
	good_id INT NOT NULL,
	category_id INT NOT NULL,
	PRIMARY KEY (good_id, category_id),
	CONSTRAINT good_category_ibfk_1 FOREIGN KEY(good_id) REFERENCES goods(good_id),
	CONSTRAINT good_category_ibfk_2 FOREIGN KEY(category_id) REFERENCES categories(category_id)
);

CREATE TABLE good_order (
	good_id INT NOT NULL,
	order_id INT NOT NULL,
	PRIMARY KEY (good_id, order_id),
	FOREIGN KEY(good_id) REFERENCES goods(good_id),
	FOREIGN KEY(order_id) REFERENCES orders(order_id)
);

INSERT INTO users(first_name, second_name, email, is_admin)
VALUES('Сергей', 'Птичкин', 'sergey.ptichkin@gmail.com', true);
-- ('', 1, 5, ''),
INSERT INTO goods(name, cost, count, manufacturer, description) VALUES
('Смартфон iPhone 15', 86000, 15, 'Apple', '128 ГБ черный [ядер - 6x(3.46 ГГц), 6 ГБ, 2 SIM, Super Retina XDR, 2556x1179, камера 48+12 Мп, NFC, 5G, GPS, 3349 мА*ч]'),
('Смартфон iPhone 15 PRO MAX', 214000, 15, 'Apple', '1024 ГБ белый [ядер - 6x(3.78 ГГц), 8 ГБ, 2 SIM, Super Retina XDR, 2796x1290, камера 48+12+12 Мп, NFC, 5G, GPS, 4441 мА*ч]'),
('Смартфон Samsung Galaxy A05', 12500, 0, 'Samsung', '64 ГБ зеленый [ядер - 8x(2 ГГц), 4 ГБ, 2 SIM, PLS, 1600x720, камера 50+2 Мп, 4G, GPS, 5000 мА*ч]'),
('Смартфон Samsung Galaxy A54 5G', 37000, 17, 'Samsung', '256 ГБ черный [ядер - 8x(2.4 ГГц), 8 ГБ, 2 SIM, Super AMOLED, 2340x1080, камера 50+12+5 Мп, NFC, 5G, GPS, 5000 мА*ч]'),
('Смартфон Xiaomi Redmi Note 12', 16000, 12, 'Xiaomi', '128 ГБ черный [ядер - 8x(2.8 ГГц), 6 ГБ, 2 SIM, AMOLED, 2400x1080, камера 50+8+2 Мп, NFC, 4G, GPS, FM, 5000 мА*ч]'),
('Смартфон Xiaomi 12X', 45000, 5, 'Xiaomi', '128 ГБ голубой [ядер - 8x(3.2 ГГц), 8 ГБ, 2 SIM, AMOLED, 2400x1080, камера 50+13+5 Мп, NFC, 5G, GPS, 4500 мА*ч]'),
('Планшет Apple iPad (9th Gen) Wi-Fi', 33000, 30, 'Apple', '64 ГБ серый [2160x1620, IPS, 6x2.66 ГГц, 3 ГБ, 8686 мА*ч, iPadOS 15]'),
('Планшет Apple iPad (10th Gen) Wi-Fi', 68000, 11, 'Apple', '256 ГБ голубой [2360x1640, IPS, 6x3.1 ГГц, 4 ГБ, 7606 мА*ч, iPadOS 16]'),
('Планшет Samsung Galaxy Tab A7 Lite LTE', 12000, 20, 'Samsung', '32 ГБ серый [1340x800, PLS, 8x2.3 ГГц, 3 ГБ, 5100 мА*ч, Android 11.x]'),
('Планшет Samsung Galaxy Tab S9 FE Wi-Fi', 48000, 0, 'Samsung', '256 ГБ серый + стилус [2304x1440, PLS, 8x2.4 ГГц, 8 ГБ, 8000 мА*ч, Android 13.x]'),
('Планшет Xiaomi Redmi Pad Wi-Fi', 17000, 13, 'Xiaomi', '64 ГБ серый [2000x1200, IPS, 8x2.2 ГГц, 3 ГБ, 8000 мА*ч, Android 12.x]'),
('Планшет Xiaomi Pad 6 Wi-Fi', 37000, 6, 'Xiaomi', '128 ГБ черный [2880x1800, IPS, 8x3.2 ГГц, 6 ГБ, 8840 мА*ч, Android 13.x]'),
('Компактный фотоаппарат Canon PowerShot SX70 HS', 74000, 17, 'Canon', 'черный [20.3 Мп, фото: 5184x3888, видео 4K, зум 65 x, встроенная вспышка, дисплей 3", Bluetooth, GPS, Wi-Fi]'),
('Компактный фотоаппарат Rekam iLook S990i', 8200, 20, 'Rekam', 'серебристый [21 Мп, фото: 5616x3744, встроенная вспышка, дисплей 2.7"]'),
('Видеокамера Rekam ALLURE Zoom 1100', 22600, 15, 'Rekam', '[4K, 2880х2160, матрица CMOS, дисплей 3", zoom 10 x]'),
('Видеокамера Panasonic HC-VX980', 92000, 0, 'Panasonic', '[4K, 3840x2160, матрица BSI MOS, 18.91 Мп, дисплей 3", zoom 20 x, Wi-Fi, 1940 мА*ч]'),
('LED-телевизор DEXP 24HKN1', 7900, 18, 'DEXP', '24" (60 см) черный [Direct LED, HD, 60 Гц, HDMI х 2, USB х 2 шт]'),
('LED-телевизор DEXP 75UCY1/G', 60000, 15, 'DEXP', '75" (190 см) серый [Direct LED, 4K UltraHD, Wi-Fi, 60 Гц, YaOS, HDMI х 3, USB х 2 шт]'),
('LED-телевизор Samsung UE50AU7002UXRU', 43000, 43, 'Samsung', '50" (125 см) черный [Edge LED, 4K UltraHD, DLNA, Wi-Fi, 60 Гц, Tizen, HDMI х 3, USB х 1 шт]'),
('LED-телевизор Samsung UE65CU7100UXRU', 70000, 18, 'Samsung', '65" (163 см) черный [Edge LED, 4K UltraHD, DLNA, Wi-Fi, 60 Гц, Tizen, HDMI х 3, USB х 1 шт]'),
('LED-телевизор Philips 43PUS8108/60', 31500, 15, 'Philips', '43" (108 см) черный [Direct LED, 4K UltraHD, DLNA, Wi-Fi, 60 Гц, фирменный интерфейс, HDMI х 3, USB х 2 шт]'),
('LED-телевизор Philips 65PUS8729/60', 80000, 0, 'Philips', '65" (164 см) серый [Direct LED, 4K UltraHD, Wi-Fi, 120 Гц, Google TV, HDMI х 4, USB х 2 шт]'),
('Проводные наушники ARDOR GAMING Edge', 3800, 10, 'ARDOR', 'черный [7.1 Virtual, охватывающие, 20 Гц - 20000 Гц, 32Ω, проводной, кабель - 1 м]'),
('Портативная колонка JBL Xtreme 3', 26800, 56, 'JBL', 'черный [Bluetooth, AUX, 5000 мА*ч, время работы - до 15 ч]'),
('Микрофон HyperX QuadCast S', 19000, 60, 'HyperX', 'черный [проводной, настольный, -36 дБ, от 20 Гц до 20000 Гц, кабель - 300 см, jack 3.5 мм, USB]'),
('ПК DEXP Atlas H422', 35500, 78, 'DEXP', '[Intel Core i5-12400, 6 x 2.5 ГГц, 16 ГБ DDR4, SSD 512 ГБ, без ОС]'),
('ПК ARDOR GAMING RAGE H336', 143000, 21, 'ARDOR', '[Intel Core i5-13400F, 6 x 2.5 ГГц, 32 ГБ DDR5, GeForce RTX 4070, SSD 1000 ГБ, без ОС]'),
('Ноутбук MSI GF76 Katana B12UCX-1005XRU', 73000, 75, 'MSI', '17.3" черный [Full HD (1920x1080), IPS, Intel Core i5-12450H, ядра: 4 + 4 х 2 ГГц + 1.5 ГГц, RAM 8 ГБ, SSD 256 ГБ, GeForce RTX 2050 4 ГБ, без ОС]'),
('Ноутбук ARDOR GAMING NEO G15-I5ND300', 77000, 24, 'ARDOR', '15.6" черный [Full HD (1920x1080), IPS, Intel Core i5-12450H, ядра: 4 + 4 х 2 ГГц + 1.5 ГГц, RAM 16 ГБ, SSD 512 ГБ, GeForce RTX 3050 для ноутбуков 6 ГБ, без ОС]'),
('Ноутбук ASUS Vivobook X1704ZA-AU123', 66000, 3, 'ASUS', '17.3" синий [Full HD (1920x1080), IPS, Intel Core i5-1235U, ядра: 2 + 8 х 1.3 ГГц + 0.9 ГГц, RAM 16 ГБ, SSD 512 ГБ, Intel Iris Xe Graphics, без ОС]'),
('Ноутбук Apple MacBook Air', 120000, 2, 'Apple', '13.6" черный [2560x1664, IPS, Apple M2, ядра: 4 + 4 х 3.5 ГГц + 2.4 ГГц, RAM 8 ГБ, SSD 256 ГБ, Apple M2 8-core, macOS]'),
('Ноутбук ASUS ROG Zephyrus G14 GA402XV-N2084W', 170000, 0, 'ASUS', '14" серый [2560x1600, IPS, AMD Ryzen 9 7940HS, ядра: 8 х 4 ГГц, RAM 32 ГБ, SSD 1000 ГБ, GeForce RTX 4060 для ноутбуков 8 ГБ, Windows 11 Home Single Language]'),
('Монитор MSI Optix G274QPX', 43000, 8, 'MSI', '27" черный [2560x1440@240 Гц, IPS, LED, 1000:1, 400 Кд/м², 178°/178°, DisplayPort 1.4a, HDMI 2.0b x2, USB Type-C, NVIDIA G-SYNC Compatible]'),
('Монитор ARDOR GAMING LINK AF24H1UE', 14500, 3, 'ARDOR', '23.8" черный [1920x1080 (FullHD)@180 Гц, IPS, LED, 1000:1, 350 Кд/м², 178°/178°, DisplayPort 1.4, HDMI 2.1 x2, USB х3 шт, AMD FreeSync Compatible, NVIDIA G-SYNC Compatible]'),
('Монитор Xiaomi Mi 2K Gaming Monitor', 32400, 0, 'Xiaomi', '27" черный [2560x1440@165 Гц, IPS, LED, 1000:1, 400 Кд/м², 178°/178°, DisplayPort, HDMI x2, USB х2 шт, Adaptive-Sync]'),
('Клавиатура ARDOR GAMING Blade', 4600, 13, 'ARDOR', 'проводная [механическая Kailh Red, клавиш - 104, USB, черная]'),
('Клавиатура ARDOR GAMING Blade PRO', 4200, 0, 'ARDOR', 'проводная [механическая Kailh Red, клавиш - 87, USB, черная]'),
('Мышь ARDOR GAMING Fury', 1700, 99, 'ARDOR', 'проводная черный [12400 dpi, светодиодный, USB Type-A, кнопки - 7]'),
('Мышь Logitech M90', 800, 50, 'Logitech', 'проводная черный [1000 dpi, светодиодный, USB Type-A, кнопки - 3]'),
('Мышь ARDOR GAMING Phantom PRO V2', 4900, 0, 'ARDOR', 'беспроводная черный [26000 dpi, светодиодный, USB Type-A, радиоканал, кнопки - 6]');



INSERT INTO categories(name, parent_id) VALUES
('Смартфоны', NULL),
('Планшеты', NULL),
('Фототехника', NULL),
('Телевизоры', NULL),
('Аудиотехника', NULL),
('Компьютеры', NULL),
('Фотоаппараты', 3),
('Видеокамеры', 3),
('Наушники', 5),
('Портативные колонки', 5),
('Микрофоны', 5),
('ПК', 6),
('Ноутбуки', 6),
('Периферия', 6),
('Мониторы', 14),
('Клавиатуры', 14),
('Мыши', 14),
('Микрофоны', 14);
	

INSERT INTO comments(user_id, good_id, text, rating)
VALUES(1, 1, 'Cool', 5);

INSERT INTO status(name)
VALUES('Оплачен');

INSERT INTO good_category(good_id, category_id) VALUES
(1, 1),
(2, 1),
(3, 1),
(4, 1);